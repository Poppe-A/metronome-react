(this["webpackJsonpmetronome-react"]=this["webpackJsonpmetronome-react"]||[]).push([[0],{25:function(t,e,n){},26:function(t,e,n){},27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n(1),a=n.n(o),s=n(19),r=n.n(s),c=(n(25),n(3)),l=n(4),d=n(6),u=n(5),p=function(t){return t.children},g=n(9),m=n(7),h=(n(26),function(t){var e=t.isSelected?"selectedSong":"";return Object(i.jsxs)("div",{className:"Song "+e,onClick:function(){return t.selectSong(t.id)},children:[Object(i.jsxs)("div",{className:"SongLabels",children:[Object(i.jsx)("p",{className:"SongName",children:t.name}),Object(i.jsx)("p",{className:"songTempo",children:t.tempo+" BPM"})]}),Object(i.jsx)("div",{className:"SongOption",onClick:function(e){return t.editSong(e,t.name,t.tempo,t.timeSignature,t.id)}})]})}),S=(n(27),function(t){return Object(i.jsxs)("div",{className:"SongListContainer",children:[Object(i.jsx)("div",{className:"SongList",children:t.songList.map((function(e){return Object(i.jsx)(h,{id:e.id,name:e.title,tempo:e.tempo,timeSignature:e.timeSignature,selectSong:t.selectSong,isSelected:e.isSelected,editSong:t.editSong},e.id)}))}),Object(i.jsx)("div",{className:"AddSong",onClick:t.addSong,children:"Add a song"})]})}),j=(n(28),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).clampTempo=function(t){return i.clamp(t,30,300)},i.getTempo=function(){return i.clampTempo(130)},i.startSound=function(){var t=i.ac.createBufferSource();t.buffer=i.buffer,t.loop=!0,t.connect(i.ac.destination),t.start()},i.startWorkerTempo=function(){var t=6e4/i.state.tempo;i.worker.postMessage({message:"start",tempo:t})},i.stopWorkerTempo=function(){var t=6e4/i.state.tempo;i.worker.postMessage({message:"stop",tempo:t})},i.initBlinkerPart=function(t){for(var e=[],n=0;n<t;n++)e.push({bipped:!1});return e},i.startTempo=function(){var t=document.getElementById("Blinker");console.log("Blinker ",t);var e=6e4/i.state.tempo;clearInterval(i.timer),i.timer=setInterval(i.bipBlink,e),i.bipBlink(0)},i.bipBlink=function(t){console.log(" count ",i.state.count);var e=Object(m.a)(i.state.blinkerParts),n=i.state.count;n>0?e[n-1].bipped=!1:e[i.state.timeSignature-1].bipped=!1,e[n].bipped=!0,n=n===i.state.timeSignature-1?0:n+1,i.setState({blinkerParts:e,count:n}),i.props.playSound},i.timer=null,i.ac=new AudioContext,i.state={blinkerParts:i.initBlinkerPart(i.props.timeSignature||4),count:0,tempo:null,timeSignature:i.props.timeSignature||4},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"configureSound",value:function(){for(var t=this.ac.createBuffer(1,2*this.ac.sampleRate,this.ac.sampleRate),e=t.getChannelData(0),n=0,i=1,o=this.ac.sampleRate/50,a=0;a<o;a++)e[a]=Math.sin(n)*i,(n+=2*Math.PI*330/this.ac.sampleRate)>2*Math.PI&&(n-=2*Math.PI),i-=1/o;var s=this.ac.createBufferSource();s.buffer=t,s.loop=!0,s.loopEnd=1/(this.getTempo()/60),s.connect(this.ac.destination),s.start(0),this.buffer=t}},{key:"componentDidUpdate",value:function(t,e){this.props.timeSignature!==this.state.timeSignature&&this.setState({blinkerParts:this.initBlinkerPart(this.props.timeSignature),timeSignature:this.props.timeSignature}),this.props.tempoToPlay!==this.state.tempo&&this.setState({blinkerParts:this.initBlinkerPart(this.props.timeSignature),tempo:this.props.tempoToPlay,count:0}),e.tempo!==this.state.tempo&&this.startTempo()}},{key:"render",value:function(){var t=this.state.blinkerParts.map((function(t,e){var n=t.bipped?"bipped":"";return Object(i.jsx)("div",{className:"blinkerPart "+n,id:"blinkerPart"+e},e)}));return Object(i.jsx)(p,{children:Object(i.jsx)("div",{id:"Blinker",children:t})})}}]),n}(o.Component)),f=(n(29),n(30),function(t){return t.show?Object(i.jsx)("div",{className:"Backdrop",onClick:t.clicked}):null}),b=function(t){return Object(i.jsxs)(p,{children:[Object(i.jsx)(f,{show:t.show,clicked:t.close,children:" "}),Object(i.jsx)("div",{className:"Modal",style:{transform:t.show?"translateY(0)":"translateY(-100vh",opacity:t.show?"1":"0"},children:t.children})]})},O=(n(31),n(32),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).handleText=function(e){t.setState({songTitle:e.target.value})},t}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(t){this.props.songEdition.title!==t.songEdition.title&&this.setState({songTitle:this.props.songEdition.title})}},{key:"render",value:function(){var t=null;return this.props.songEdition.id&&(t=Object(i.jsx)("button",{onClick:this.props.deleteSong,children:"Delete"})),Object(i.jsxs)("div",{className:"AddSongMod",children:[Object(i.jsx)("p",{className:"FormTitle",children:this.props.songEdition.id?"Edit Song":"Add Song"}),Object(i.jsxs)("form",{className:"AddSongForm",children:[Object(i.jsxs)("label",{className:"AddSongLabel",children:[Object(i.jsx)("p",{children:"Title :"}),Object(i.jsx)("input",{type:"text",value:this.props.songEdition.title||"",onChange:this.props.changeEditionName})]}),Object(i.jsxs)("label",{className:"AddSongLabel",children:[Object(i.jsx)("p",{children:"Tempo :"}),Object(i.jsx)("input",{type:"text",value:this.props.songEdition.tempo||"",onChange:this.props.changeEditionTempo})]}),Object(i.jsxs)("label",{className:"AddSongLabel",children:[Object(i.jsx)("p",{children:"Time signature :"}),Object(i.jsx)("input",{type:"text",value:this.props.songEdition.timeSignature||"",onChange:this.props.changeEditionSignature})]})]}),Object(i.jsx)("button",{onClick:this.props.mainButtonFunction,children:this.props.mainButtonLabel}),t]})}}]),n}(o.Component)),v=n(8),E=n.n(v),x=E.a.create({baseURL:"http://127.0.0.1:9000"});E.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",E.a.defaults.headers.post["Access-Control-Allow-Origin"]="*";var k=x,T=function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={songList:[{title:"INTRO",tempo:105,timeSignature:3,id:7557452,isSelected:!1},{title:"MODERN TALES",tempo:160,timeSignature:4,id:89898989,isSelected:!1},{title:"ERATO",tempo:187,timeSignature:3,id:8787878,isSelected:!1},{title:"RAFTER",tempo:141,timeSignature:3,id:45464564,isSelected:!1},{title:"BROOMS",tempo:120,timeSignature:4,id:1561561,isSelected:!1},{title:"CHURCH",tempo:179,timeSignature:3,id:11111111,isSelected:!1},{title:"COLD",tempo:140,timeSignature:3,id:2222222,isSelected:!1},{title:"GORGO",tempo:138,timeSignature:4,id:3333333,isSelected:!1},{title:"TWO STEPS",tempo:185,timeSignature:4,id:2592952,isSelected:!1}],selectedSongId:null,timeSignature:4,tempoToPlay:null,tempoPlaying:!1,showModal:!1,songEdition:{title:null,tempo:null,timeSignature:null,id:null}},t.toggleTempoPlaying=function(){t.setState({tempoPlaying:!t.state.tempoPlaying})},t.selectSong=function(e){var n=Object(m.a)(t.state.songList);t.state.selectedSongId&&(n.find((function(e){return e.id===t.state.selectedSongId})).isSelected=!1);var i=n.findIndex((function(t){return t.id===e}));n[i].isSelected=!0,t.setState({songList:n,selectedSongId:n[i].id,tempoToPlay:n[i].tempo,timeSignature:n[i].timeSignature})},t.editSong=function(e,n,i,o,a){t.openModal(n,i,o,a),e.stopPropagation()},t.addSong=function(){t.openModal(null,null,null)},t.closeModal=function(){t.setState({songEdition:{title:null,tempo:null,timeSignature:null,id:null},showModal:!1})},t.openModal=function(e,n,i,o){t.setState({showModal:!0,songEdition:{title:e||null,tempo:n||null,timeSignature:i||null,id:o||null}})},t.changeEditionName=function(e){var n=Object(g.a)({},t.state.songEdition);n.title=e.target.value,t.setState({songEdition:n})},t.changeEditionTempo=function(e){var n=Object(g.a)({},t.state.songEdition);n.tempo=e.target.value,t.setState({songEdition:n})},t.changeEditionSignature=function(e){var n=Object(g.a)({},t.state.songEdition);n.timeSignature=e.target.value,t.setState({songEdition:n})},t.createOrModifySong=function(){var e=t.state.songEdition.id?"/updateSong":"/newSong";t.state.songEdition.title&&t.state.songEdition.tempo&&t.state.songEdition.timeSignature?k.post(e,{id:t.state.songEdition.id||null,title:t.state.songEdition.title,tempo:t.state.songEdition.tempo,timeSignature:t.state.songEdition.timeSignature},{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return t.setState({songList:e.data})})).then((function(){return t.closeModal()})):alert("Please fill all the fields")},t.deleteSong=function(){k.post("/deleteSong/"+t.state.songEdition.id).then((function(e){return t.setState({songList:e.data})})).then((function(){return t.closeModal()}))},t.componentDidMount=function(){k.get("/getSongs").then((function(t){}))},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this.state.tempoPlaying?"soundOn":"soundOff";return Object(i.jsxs)("div",{className:"MetronomeWindow",children:[Object(i.jsx)("h1",{children:"MY SETLIST METRONOME"}),Object(i.jsx)(b,{show:this.state.showModal,close:this.closeModal,children:Object(i.jsx)(O,{songEdition:this.state.songEdition,changeEditionName:this.changeEditionName,changeEditionTempo:this.changeEditionTempo,changeEditionSignature:this.changeEditionSignature,deleteSong:this.deleteSong,mainButtonFunction:this.createOrModifySong,mainButtonLabel:this.state.songEdition.id?"Update":"Create"})}),Object(i.jsx)(j,{timeSignature:this.state.timeSignature,tempoToPlay:this.state.tempoToPlay,playSound:this.state.tempoPlaying,tempoOnOff:this.toggleTempoPlaying}),Object(i.jsx)(S,{songList:this.state.songList,selectSong:this.selectSong,editSong:this.editSong,addSong:this.addSong}),Object(i.jsx)("div",{id:"toggleSound",className:t,onClick:this.toggleTempoPlaying})]})}}]),n}(o.Component),y=(n(51),function(t){Object(d.a)(n,t);var e=Object(u.a)(n);function n(){return Object(c.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(i.jsx)("div",{className:"MainApp",children:Object(i.jsx)(T,{})})}}]),n}(o.Component)),P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),i(t),o(t),a(t),s(t)}))};r.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(y,{})}),document.getElementById("root")),P()}},[[52,1,2]]]);
//# sourceMappingURL=main.6384988b.chunk.js.map